# singlecyclecpu

> 来自武汉大学计算机学院计算机组成与设计课程设计
> 单周期 RISC-V 实现

## 仓库介绍

个人认为对CPU设计的关键之处在于译码(ID)阶段。
但是在本科教学阶段，学校并没有过深讲述译码这个过程，而是更多的强调学生的动手能力。
学院的实验课上，交给学生一个勉强够用的模板文件便草草了事。

但个人认为学院的模板并没有降低设计的难度，反而增加了阅读代码所需要的成本。
于是我决定跟据自己的想法实现一份更好的代码，拥有更清晰、更完整的逻辑框架，而不仅仅局限于学校的教学目标。

## 设计原则

变量名要尽可能体现它的意义，因为太短的变量名不够醒目，长时间未接触便会忘记其功能。

单一简单的模块，其代码长度不应该过长，最好控制在50行，超过100行是不可接受的。

## 从0开始

个人认为要实现一个好的CPU，可以先考虑实现一些逻辑独立的单元，并分开单独测试。
这样可以避免出现bug的时候，无从下手debug的窘境。

主要就是从易到难。

## 简单的模块

以下这些模块对整个项目来说难度不高，对新手友好。

-   InstrMem：存储待运行指令的一个地方，需要读取外部文件，根据传入的地址读取相应的指令。
-   RegsFile：这个文件是一个寄存器堆，需要根据寄存器数字读写数据。
-   DataMem：存储数据的一个地方，实现的功能主要是模仿硬盘，根据传入的地址读写相应的数据。
-   ALU：算术运算单元，需要根据不同的指令进行不同的二元运算。
-   ProgramCounter：负责PC

### 测试方法

您可以根据您的需求修改Makefile，包括但不限于在SOURCES_SELECT中填写对应的文件名、修改成您的verilog编译器、修改成您的仿真环境。

可以通过单独测试的模块：

-   InstrMem.v tb/InstrMem_tb.v
-   RegsFile.v tb/RegsFile_tb.v
-   DataMem.v tb/DataMem_tb.v
-   ALU.v tb/ALU_tb.v Defines.v
-   ProgramCounter.v tb/ProgramCounter_tb.v Defines.v

## 复杂的模块

-   Breakdown：负责分解32位长的指令
-   Controller：负责调度CPU的状态
-   Decode：管理每个指令应该做的事情
-   CPU：最终成品

如果ProgramCounter tb/ProgramCounter_tb.v写到最后
